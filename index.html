<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TON Wallet Connect</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        button {
            background: #0088cc;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 30px;
            transition: background 0.3s;
        }
        button:hover {
            background: #006699;
        }
        .status {
            margin-top: 20px;
            color: #aaa;
        }
    </style>
</head>
<body>
    <h1>üîó –ü—Ä–∏–≤—è–∑–∫–∞ TON –∫–æ—à–µ–ª—å–∫–∞</h1>
    <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</p>
    
    <button id="connectBtn">–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫–æ—à–µ–ª—ë–∫</button>
    <div id="status" class="status"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const btn = document.getElementById('connectBtn');
            const status = document.getElementById('status');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API
            if (!window.Telegram || !Telegram.WebApp) {
                status.textContent = "–û—à–∏–±–∫–∞: Telegram WebApp API –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω";
                btn.disabled = true;
                return;
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º WebApp
            Telegram.WebApp.ready();
            status.textContent = "WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω";
            
            btn.addEventListener('click', function() {
                try {
                    if (!Telegram.WebApp.initDataUnsafe) {
                        status.textContent = "–û—à–∏–±–∫–∞: –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã";
                        return;
                    }
                    
                    const user = Telegram.WebApp.initDataUnsafe.user;
                    const walletData = {
                        user_id: user?.id,
                        username: user?.username,
                        first_name: user?.first_name,
                        wallet_type: "telegram_wallet",
                        auth_date: Telegram.WebApp.initDataUnsafe.auth_date,
                        hash: Telegram.WebApp.initDataUnsafe.hash
                    };
                    
                    status.textContent = "–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...";
                    
                    Telegram.WebApp.sendData(JSON.stringify(walletData));
                    Telegram.WebApp.close();
                    
                } catch (e) {
                    status.textContent = "–û—à–∏–±–∫–∞: " + e.message;
                    console.error(e);
                }
            });
        });
    </script>
</body>
</html>
